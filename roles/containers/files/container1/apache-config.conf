<VirtualHost *:80>
    ServerName default
    RewriteEngine On
    RewriteRule ^(.*)$ http://prankex.io$1 [L,R=301]
</VirtualHost>

<VirtualHost *:80>
    ServerName prankex.io
    ServerAlias www.prankex.io
    DocumentRoot /var/www/html

    <Directory /var/www/html>
        Options -Indexes +FollowSymLinks -Multiviews
        AllowOverride None
        Require all granted
        DirectoryIndex index.php index.html
    </Directory>

    <Files "db.php">
        Require all denied
    </Files>
    <Files "flag.txt">
        Require all denied
    </Files>

    RewriteEngine On

    RewriteCond %{THE_REQUEST} \s/([^\s?]+)\.php[?\s] [NC]
    RewriteRule ^ %1 [R=301,L]

    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{DOCUMENT_ROOT}/$1.php -f
    RewriteRule ^(.+?)/?$ $1.php [L]
</VirtualHost>